let botwRepository=function(){let e=[],t=[];function n(){return e}function i(t){"object"!=typeof t?console.log("Should be an object"):"name"in t&&"image"in t&&"id"in t?e.push(t):console.log("Invalid keys")}function o(){document.querySelector(".compendium-list").innerHTML=""}function a(e){$(".active").removeClass("active"),$(`#carousel-${e.id}`).addClass("active")}document.getElementById("searchBar").addEventListener("keyup",function(t){let n=t.target.value.toLowerCase(),i=e.filter(function(e){if(!e.name.toLowerCase().includes(n)||!e.id.toString().includes(n))return e}),o=e.filter(function(e){if(e.name.toLowerCase().includes(n)||e.id.toString().includes(n))return e});o.push(...e.filter(function(e){return e.id.toString().includes(n)})),i.map(e=>{document.getElementById(e.id).classList.add("hide-item")}),o.map(e=>{document.getElementById(e.id).classList.remove("hide-item")})});let l=$(".search-button"),d=$(".page-title");function s(){$("#category-dropdown").append('<li class="dropdown-item"><button id="all" onclick="botwRepository.categoryFilter(\'all\')" class="filter-button btn">All Categories</button></li>'),t.forEach(e=>$("#category-dropdown").append(`<li class="dropdown-item"><button id="${e}" onclick="botwRepository.categoryFilter('${e}')" class="filter-button btn">${e.charAt(0).toUpperCase()+e.slice(1)}</button></li>`))}return $(document).ready(function(){$(l).click(function(){d.toggleClass("d-none d-md-block"),$(".search-bar").toggleClass("d-none")})}),$(".dropdown").click(function(){$(".dropdown-menu").toggleClass("show")}),{getAll:n,add:i,addListItem:function e(t){let n=document.querySelector(".compendium-list"),i=document.createElement("li");i.classList.add("group-list-item","d-flex","align-items-center","justify-content-center"),i.id=t.id;let o=document.createElement("button");o.innerHTML=`<img class="loading" data-toggle="modal" data-targe="#modal-container" src=${t.image}></img><p>${t.id}</p class='text-center'><h2>${t.name}</h2>`,o.classList.add("btn","compendium-button","d-inline-block","text-center"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#modal-container"),i.appendChild(o),n.appendChild(i),function e(t,n){t.addEventListener("click",function(){a(n)})}(o,t);let l=document.createElement("div");l.classList.add("carousel-item"),l.id=`carousel-${t.id}`;let d=document.createElement("div");d.classList.add("modal-header","text-center","justify-content-center","align-items-center","flex-column");let s=document.createElement("button");s.classList.add("modal-close","close"),s.setAttribute("data-dismiss","modal"),s.setAttribute("aria-label","close"),s.innerText="X";let c=document.createElement("h1");c.classList.add("modal-title"),c.setAttribute("id","modalContainerTitle");let r=t.name.toUpperCase();c.innerText=t.id+". "+r;let m=document.createElement("div");m.classList.add("modal-body");let u=document.createElement("img");u.classList.add("modal-image","loading"),u.alt=`An image of ${t.name}`,u.src=t.image;let p=document.createElement("div");p.innerHTML=`<h3>Description</h3><p class="text-center">${t.description}</p>`;let g=document.createElement("div"),f="";f=null===t.common_locations?"Unknown":t.common_locations.join(", "),g.innerHTML=`<h3>Common Locations</h3><p class="text-center">${f}</p>`,d.appendChild(s),d.appendChild(c),m.appendChild(u),m.appendChild(p),m.appendChild(g),l.appendChild(d),l.appendChild(m),$(".carousel-inner").append(l)},loadList:function e(){let n,a;return n=document.querySelector(".compendium-list"),(a=document.createElement("p")).innerHTML="Loading, please wait",a.classList.add("loading-message"),n.appendChild(a),fetch("https://botw-compendium.herokuapp.com/api/v2").then(function(e){return e.json()}).then(function(e){o();let n=e.data;t.push(...Object.keys(n)),s();let a=[...t.map(e=>"creatures"===e?[...n[e].food,...n[e].non_food]:n[e]),],l=a.flat();l.sort((e,t)=>e.id-t.id),l.forEach(e=>{i(e)})}).catch(function(e){o(),console.error(e)})},showDetails:a,categories:t,categoryFilter:function t(n){let i=[],o=[];"all"===n?i=e:(o=e.filter(function(e){if(e.category!==n)return e}),i=e.filter(function(e){if(e.category===n)return e})),o.map(e=>{document.getElementById(e.id).classList.add("hide-item")}),i.map(e=>{document.getElementById(e.id).classList.remove("hide-item")})},loadCategories:s}}();botwRepository.loadList().then(function(){botwRepository.getAll().forEach(function(e){botwRepository.addListItem(e)})});